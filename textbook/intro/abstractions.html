
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>4. Operating System Abstractions &#8212; Introduction to Operating Systems</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script async="async" kind="hypothesis" src="https://hypothes.is/embed.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.1/dist/embed-amd.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5. Tools" href="tools.html" />
    <link rel="prev" title="3. Operating System Structure &amp; Unix/Linux" href="structure.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Introduction to Operating Systems</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="pref.html">
                    Preface
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Getting started
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="intro.html">
   1. Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="purpose.html">
   2. Purpose of operating systems
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="structure.html">
   3. Operating System Structure &amp; Unix/Linux
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   4. Operating System Abstractions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="tools.html">
   5. Tools
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Memory Management
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../mm/intro.html">
   6. Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mm/virt-seg.html">
   7. Segmentation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mm/virt-paging.html">
   8. Paging
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mm/page-tables.html">
   9. Page Tables
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mm/reclamation.html">
   10. Memory reclaiming algorithms.
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mm/buffer-cache.html">
   11. Buffer Cache
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mm/pagefaults.html">
   12. Page Faults
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mm/misc.html">
   13. Conclusion
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mm/realworld.html">
   14. Memory management in the real world
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mm/concl.html">
   15. Other Stuff
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  File Systems
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../fs/intro.html">
   16. Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../fs/interface.html">
   17. Interface
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../fs/disklayout.html">
   18. File System Layout
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../fs/kernelimp.html">
   19. Kernel implementation
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Concurrency
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../sync/sync.html">
   20. Intro Concurrency Synchronization and Deadlock
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../sync/sharing.html">
   21. Cooperating Processes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../sync/locking.html">
   22. Synchronization Primitives
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../sync/deadlock.html">
   23. Deadlocks
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../sync/hardware_challenges.html">
   24. Challenges of Modern Hardware
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../sync/linux_locking.html">
   25. Locking in the Linux Kernel
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Other Topics
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../misc/OtherInro.html">
   26. Overview of other topics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../virt/virt.html">
   27. Virtualization and Cloud computing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="other.html">
   28. Other OS structures
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Appendices
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../misc/howto.html">
   29. How to read this book
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../contributing/Contributing.html">
   30. Contributing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../misc/bib.html">
   31. Bibliography
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/okrieg/openos/main?urlpath=lab/tree/content/intro/abstractions.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
      <li>
        <a href="https://jupyterhub-redhat-ods-applications.apps.buaws-dev.idu6.p1.openshiftapps.com/hub/user-redirect/git-pull?repo=https%3A//github.com/okrieg/openos&urlpath=lab/tree/openos/content/intro/abstractions.ipynb&branch=main"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on JupyterHub"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_jupyterhub.svg">
  </span>
<span class="headerbtn__text-container">JupyterHub</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/okrieg/openos"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/okrieg/openos/issues/new?title=Issue%20on%20page%20%2Fintro/abstractions.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/okrieg/openos/edit/main/content/intro/abstractions.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/intro/abstractions.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#everything-is-a-file">
   4.1. Everything is a file
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#process-management">
   4.2. Process management
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#changing-stdin-stdout">
     4.2.1. Changing stdin/stdout
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#file-system-system-calls">
     4.2.2. File system system calls
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pipes">
   4.3. Pipes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#signals">
   4.4. Signals
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#conclusion">
   4.5. Conclusion
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Operating System Abstractions</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#everything-is-a-file">
   4.1. Everything is a file
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#process-management">
   4.2. Process management
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#changing-stdin-stdout">
     4.2.1. Changing stdin/stdout
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#file-system-system-calls">
     4.2.2. File system system calls
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pipes">
   4.3. Pipes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#signals">
   4.4. Signals
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#conclusion">
   4.5. Conclusion
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This portion of the book is under construction, not ready to be read</p>
</div>
<section class="tex2jax_ignore mathjax_ignore" id="operating-system-abstractions">
<span id="cont-gs-abstractions"></span><h1><span class="section-number">4. </span>Operating System Abstractions<a class="headerlink" href="#operating-system-abstractions" title="Permalink to this headline">#</a></h1>
<p>UNIX has instilled in generations of computer scientists a basic aesthetic for how to design and structure complicated collections of software.  In particular one learns that the designers of UNIX tried to structure the system around a small core set of ideas, “abstractions”, that once understood allows a programmer to understand the rest of the system and how to get things done.</p>
<p>We first describe the fundamental abstraction of <a class="reference internal" href="#cont-gs-abstractions-file"><span class="std std-ref">files</span></a> that is core to the power and understand of Unix’s ability to enable programs, to be composed together, and how this enables powerful functionality to be implemented in a shell.  We then, using a shell as a example, briefly discuss key abstractions of <a class="reference internal" href="#cont-gs-abstractions-process"><span class="std std-ref">processes</span></a>, <span class="xref myst">file systems</span>, <a class="reference internal" href="#cont-gs-abstractions-pipes"><span class="std std-ref">pipes</span></a> and <a class="reference internal" href="#cont-gs-abstractions-signals"><span class="std std-ref">signals</span></a>.</p>
<section id="everything-is-a-file">
<span id="cont-gs-abstractions-file"></span><h2><span class="section-number">4.1. </span>Everything is a file<a class="headerlink" href="#everything-is-a-file" title="Permalink to this headline">#</a></h2>
<p>A core idea of Unix is that everything is a file, where a file is a stream of bytes.  As shown <a class="reference internal" href="#file-desc"><span class="std std-numref">Fig. 4.1</span></a> the kernel maintains a table of open files, and a file descriptor is an index into that table that can be used to read or write to a particular file.  The system calls that work on all files are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">=</span> <span class="pre">write(desc,</span> <span class="pre">buffer,</span> <span class="pre">len)</span></code>: Write <code class="docutils literal notranslate"><span class="pre">len</span></code> bytes from <code class="docutils literal notranslate"><span class="pre">buffer</span></code> into a stream identified by <code class="docutils literal notranslate"><span class="pre">desc</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">=</span> <span class="pre">read(desc,</span> <span class="pre">buffer,</span> <span class="pre">max)</span></code>: Read <code class="docutils literal notranslate"><span class="pre">max</span></code> bytes (or fewer if no data is available) from stream identified by <code class="docutils literal notranslate"><span class="pre">desc</span></code> into <code class="docutils literal notranslate"><span class="pre">buffer</span></code>and returning the actual number of bytes <code class="docutils literal notranslate"><span class="pre">n</span></code> read.</p></li>
</ul>
<p>To understand how to use these operations, you really need to read the manual.  In Linux you can find out about everything using the <strong>man</strong> program.  For example, <code class="docutils literal notranslate"><span class="pre">man</span> <span class="pre">2</span> <span class="pre">write</span></code> tells you everything about the <code class="docutils literal notranslate"><span class="pre">write</span></code> system call:</p>
<div class="cell tag_output_scroll tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "82edb24b846d4a5a8ae0933c3348dd51", "version_major": 2, "version_minor": 0}
</script></div>
</div>
<div class="margin admonition note">
<p class="admonition-title">Note</p>
<p>In this case, the <em>2</em> refers to the section of the manual for system calls.  To find out about the different sections, you, of course, read the manual about the man command.</p>
</div>
<p>To make files in the file system look like a stream, on each read or write operation, the kernel increases a per <code class="docutils literal notranslate"><span class="pre">desc</span></code> offset by the amount of data read or written.  Turns out that this naturally matches many applications that read or write files in their entirety, and is key to enabling a common abstraction across all I/O.</p>
<p>This idea, that you can read or write to any kind of I/O object, enabled programs to write a single application, and, depending on how it is launched by the shell, it could work on durable state on a disk, work interactively against input typed in by a programmer, or even work by communicating with other processes, potentially over a network.</p>
<p>Entries are added to the table by operations that open or create a file or create a special file like a network connection, or a tty.  There are three special file descriptors shown in <a class="reference internal" href="#fd-table"><span class="std std-numref">Table 4.1</span></a>, that programs (and libraries) should use for input, output and errors.</p>
<figure class="align-default" id="file-desc">
<a class="reference internal image-reference" href="../_images/osstructure-fd.drawio.png"><img alt="../_images/osstructure-fd.drawio.png" src="../_images/osstructure-fd.drawio.png" style="width: 50%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 4.1 </span><span class="caption-text">The kernel maintains for each process an array of file descriptors, where a process can read or write to any kind of I/O object that are open in its table.</span><a class="headerlink" href="#file-desc" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<table class="colwidths-given table" id="fd-table">
<caption><span class="caption-number">Table 4.1 </span><span class="caption-text">Standard well known file descriptors. </span><a class="headerlink" href="#fd-table" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 11%" />
<col style="width: 18%" />
<col style="width: 71%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Purpose</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>stdin</p></td>
<td><p>standard input; process should read data from here</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>stdout</p></td>
<td><p>standard output; process will write its output here</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>stderr</p></td>
<td><p>standard error; process should write out errors here</p></td>
</tr>
</tbody>
</table>
<p>So, for example, the following program echos a string to the terminal:</p>
<div class="cell tag_output_scroll tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "235270c1a7e341cd847426eaa2343870", "version_major": 2, "version_minor": 0}
</script></div>
</div>
<div class="cell tag_output_scroll tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "5a89a556c7db49b18f2ee94b57f62d4a", "version_major": 2, "version_minor": 0}
</script></div>
</div>
<p>While the same program, can have its output redirected to a file, as we can see from <code class="docutils literal notranslate"><span class="pre">cat</span> </code> which then prints the contents of that file to the terminal:</p>
<div class="cell tag_output_scroll tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "1a13f0819bdc45a7a68b56fbad4191e7", "version_major": 2, "version_minor": 0}
</script></div>
</div>
<p>This probably seems obvious to a modern reader, i.e., an object oriented design, where you can do the same operations on any object. However, at the time, it was a radical idea, operating systems had specialized interfaces for files with records, terminals, etc…  Moreover, by introducing the idea of a special object/file, a <em>pipe</em>, you could allow programs to be combined together to do much more powerful tasks.   The <strong>|</strong> symbol tells the shell to create a pipe that connects the output of one program to the input of the next program.  So, lets say we are trying to find all the programs on our computer that have anything to do with perl, the following command will list the contents of the /usr/bin/ directory send the output of that listing to a grep program that searches for the word perl, and send the output of that to a program that counts the number of lines of input it had</p>
<div class="cell tag_output_scroll tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "c67d0bdcc56347ef909e6d516fb44d2e", "version_major": 2, "version_minor": 0}
</script></div>
</div>
<p>Today, this has gone much further.  Linux now exposes all kinds of information through synthetic file systems, giving users and administrators massive ability to automate.  For example, in <code class="docutils literal notranslate"><span class="pre">bash</span></code> the shell we are using <code class="docutils literal notranslate"><span class="pre">$$</span></code> lets us know the <code class="docutils literal notranslate"><span class="pre">id</span></code> of the process we are in.  So, stealing a nice example from <a class="reference external" href="https://jappavoo.github.io/UndertheCovers/textbook/unix/shellintro.html#standard-output-and-redirection">jonathan</a>, the following command shows the</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "b6ac91db5d9d49fa82797b55d38b9d22", "version_major": 2, "version_minor": 0}
</script></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "b9a06a626dbb469eace0363193ca0300", "version_major": 2, "version_minor": 0}
</script></div>
</div>
<p>And we can see that our stdin, stdout, and stderr all point to a character special file is in Unix is used to represent a terminal, and we can write to that same special device and it will appear in our terminal.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "79dc238077444b0f93976dfa578c7733", "version_major": 2, "version_minor": 0}
</script></div>
</div>
<p>I would strongly encourage reading the shell and unix sections of <a class="reference external" href="https://jappavoo.github.io/UndertheCovers/textbook/intro_tb.html#under-the-covers-the-secret-life-of-software">Under the Covers: The Secret Life of Software</a>  for a much more detailed coverage of this material.  However, hopefully this has given you enough information to understand the power Unix introduced by introducing polymorphism in the operating system, and creating a shell that enables you to combine all kinds of programs together in complicated ways.</p>
<p>The remainder of this chapter introduces the core abstractions of Unix, and the system calls you use on those examples, all with examples from a shell.</p>
</section>
<section id="process-management">
<span id="cont-gs-abstractions-process"></span><h2><span class="section-number">4.2. </span>Process management<a class="headerlink" href="#process-management" title="Permalink to this headline">#</a></h2>
<p>We have already introduced the abstraction of a process, it is a virtual computer.</p>
<ul class="simple">
<li><p>new architecture picture with a process descriptor, pointing to file table, and mm data structures, P1, then P2 created by fork</p></li>
<li><p>show fork and exec system calls; and say how they are so stupid</p></li>
<li><p>show a simple shell, reads a program name from stdin, forks, execs, cool.</p></li>
</ul>
<section id="changing-stdin-stdout">
<h3><span class="section-number">4.2.1. </span>Changing stdin/stdout<a class="headerlink" href="#changing-stdin-stdout" title="Permalink to this headline">#</a></h3>
<p>Introduce dup2, show how that works</p>
</section>
<section id="file-system-system-calls">
<h3><span class="section-number">4.2.2. </span>File system system calls<a class="headerlink" href="#file-system-system-calls" title="Permalink to this headline">#</a></h3>
<p>So, we know how to read and write from stdin, but how do we direct into a file.</p>
<p>Read and write work for all files, there are also a number of system calls specific to file systems. While we discuss this in more detail <a class="reference internal" href="../fs/interface.html#cont-fs-interface"><span class="std std-ref">later</span></a>, we briefly introduce the key information you need to know.  First, it is important to realize that all Unix file systems organize information in a hierarchy as shown in numref}<code class="docutils literal notranslate"><span class="pre">fs:tree-logical-abs</span></code>.</p>
<figure class="align-default" id="fs-tree-logical-abs">
<a class="reference internal image-reference" href="../_images/filesys-tree.png"><img alt="../_images/filesys-tree.png" src="../_images/filesys-tree.png" style="width: 45%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 4.2 </span><span class="caption-text">Logical view: hierarchical file system name space</span><a class="headerlink" href="#fs-tree-logical-abs" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>Some of the system calls specific to file systems are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">desc</span> <span class="pre">=</span> <span class="pre">open(name,</span> <span class="pre">O_READ)</span></code>: Verify that file <code class="docutils literal notranslate"><span class="pre">name</span></code> exists and may
be read, and then return a <em>descriptor</em> which may be used to refer to
that file when reading it.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">desc</span> <span class="pre">=</span> <span class="pre">open(name,</span> <span class="pre">O_WRITE</span> <span class="pre">|</span> <span class="pre">flags,</span> <span class="pre">mode)</span></code>: Verify permissions and
open <code class="docutils literal notranslate"><span class="pre">name</span></code> for writing, creating it (or erasing existing contents) if
necessary as specified in <code class="docutils literal notranslate"><span class="pre">flags</span></code>. Returns a descriptor which may be
used for writing to that file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">close(desc)</span></code>: stop using this descriptor, and free any resources
allocated for it.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lseek(desc,</span> <span class="pre">offset,</span> <span class="pre">flag)</span></code>: Set an open file’s current position to that
specified by <code class="docutils literal notranslate"><span class="pre">offset</span></code> and <code class="docutils literal notranslate"><span class="pre">flag</span></code>, which specifies whether <code class="docutils literal notranslate"><span class="pre">offset</span></code> is
relative to the beginning, end, or current position in the file.</p></li>
</ul>
<p>Show new picture of shell code, with redirection</p>
</section>
</section>
<section id="pipes">
<span id="cont-gs-abstractions-pipes"></span><h2><span class="section-number">4.3. </span>Pipes<a class="headerlink" href="#pipes" title="Permalink to this headline">#</a></h2>
<p>Okay, but remember that idea of pipe we talked about, well, ..</p>
</section>
<section id="signals">
<span id="cont-gs-abstractions-signals"></span><h2><span class="section-number">4.4. </span>Signals<a class="headerlink" href="#signals" title="Permalink to this headline">#</a></h2>
<p>What if you don’t want to wait for the program to finish.  Turns out… introduce background.</p>
<p>talk about zombies</p>
<p>Well remember, we have the abstraction of a virtual computer.  For the physical compter, we have the idea of interrupts.  For virtual comptuer, signals do the same thing.</p>
</section>
<section id="conclusion">
<h2><span class="section-number">4.5. </span>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">#</a></h2>
<p>You might think you know it all, but, we have only talked about</p>
</section>
</section>


<script type="application/vnd.jupyter.widget-state+json">
{"state": {"0090465682c34816a0b2899e4b6c453e": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": "scroll", "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "12cd1737aeac482db39c0ffd977682d9": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "1in", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": "scroll", "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "15394aaa9a924567a84c621b198c5ef1": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": "scroll", "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "15f70ca62beb4df984baea2af8616a76": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": "scroll", "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "1a13f0819bdc45a7a68b56fbad4191e7": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_15f70ca62beb4df984baea2af8616a76", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ cat /tmp/reshello\r\nHello class\r\n$ "}]}}, "1d5c16eee2ec428fae14d0380083bfc4": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "1in", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": "scroll", "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "235270c1a7e341cd847426eaa2343870": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_12cd1737aeac482db39c0ffd977682d9", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ echo \"Hello class\"\r\nHello class\r\n$ "}]}}, "5a89a556c7db49b18f2ee94b57f62d4a": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_0090465682c34816a0b2899e4b6c453e", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ echo \"Hello class\" > /tmp/reshello\r\n$ "}]}}, "62488e243aab49189f3ee1a33d5e9ebd": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": "scroll", "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "77907564518447ad88459cb148d5bb65": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": "scroll", "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "79dc238077444b0f93976dfa578c7733": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_62488e243aab49189f3ee1a33d5e9ebd", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ echo \"hello class\" > /dev/pts/2\r\nhello class\r\n$ "}]}}, "82edb24b846d4a5a8ae0933c3348dd51": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_a09ebcd4b51c450881beb6eb76046fb8", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ man 2 write\r\nWRITE(2)                   Linux Programmer's Manual                  WRITE(2)\r\n\r\nN\bNA\bAM\bME\bE\r\n       write - write to a file descriptor\r\n\r\nS\bSY\bYN\bNO\bOP\bPS\bSI\bIS\bS\r\n       #\b#i\bin\bnc\bcl\blu\bud\bde\be <\b<u\bun\bni\bis\bst\btd\bd.\b.h\bh>\b>\r\n\r\n       s\bss\bsi\biz\bze\be_\b_t\bt w\bwr\bri\bit\bte\be(\b(i\bin\bnt\bt _\bf_\bd,\b, c\bco\bon\bns\bst\bt v\bvo\boi\bid\bd *\b*_\bb_\bu_\bf,\b, s\bsi\biz\bze\be_\b_t\bt _\bc_\bo_\bu_\bn_\bt)\b);\b;\r\n\r\nD\bDE\bES\bSC\bCR\bRI\bIP\bPT\bTI\bIO\bON\bN\r\n       w\bwr\bri\bit\bte\be() writes up to _\bc_\bo_\bu_\bn_\bt bytes from the buffer starting at _\bb_\bu_\bf to the\r\n       file referred to by the file descriptor _\bf_\bd.\r\n\r\n       The number of bytes written may be less than  _\bc_\bo_\bu_\bn_\bt  if,  for  example,\r\n       there  is  insufficient space on the underlying physical medium, or the\r\n       R\bRL\bLI\bIM\bMI\bIT\bT_\b_F\bFS\bSI\bIZ\bZE\bE resource limit is encountered (see s\bse\bet\btr\brl\bli\bim\bmi\bit\bt(2)),  or  the\r\n       call was interrupted by a signal handler after having written less than\r\n       _\bc_\bo_\bu_\bn_\bt bytes.  (See also p\bpi\bip\bpe\be(7).)\r\n\r\n       For a seekable file (i.e., one to which l\bls\bse\bee\bek\bk(2) may  be  applied,  for\r\n       example,  a  regular  file) writing takes place at the file offset, and\r\n       the file offset is incremented by the number of bytes actually written.\r\n       If  the  file was o\bop\bpe\ben\bn(2)ed with O\bO_\b_A\bAP\bPP\bPE\bEN\bND\bD, the file offset is first set\r\n       to the end of the file before writing.  The adjustment of the file off\u2010\r\n       set and the write operation are performed as an atomic step.\r\n\r\n       POSIX  requires  that  a  r\bre\bea\bad\bd(2)  that  can be proved to occur after a\r\n       w\bwr\bri\bit\bte\be() has returned will return the  new  data.   Note  that  not  all\r\n       filesystems are POSIX conforming.\r\n\r\n       According to POSIX.1, if _\bc_\bo_\bu_\bn_\bt is greater than S\bSS\bSI\bIZ\bZE\bE_\b_M\bMA\bAX\bX, the result is\r\n       implementation-defined; see NOTES for the upper limit on Linux.\r\n\r\nR\bRE\bET\bTU\bUR\bRN\bN V\bVA\bAL\bLU\bUE\bE\r\n       On success, the number of bytes written is returned.  On error,  -1  is\r\n       returned, and _\be_\br_\br_\bn_\bo is set to indicate the cause of the error.\r\n\r\n       Note  that  a  successful  w\bwr\bri\bit\bte\be() may transfer fewer than _\bc_\bo_\bu_\bn_\bt bytes.\r\n       Such partial writes can occur for various reasons; for example, because\r\n       there was insufficient space on the disk device to write all of the re\u2010\r\n       quested bytes, or because a blocked w\bwr\bri\bit\bte\be() to a socket, pipe, or simi\u2010\r\n       lar  was interrupted by a signal handler after it had transferred some,\r\n       but before it had transferred all of the requested bytes.  In the event\r\n       of  a partial write, the caller can make another w\bwr\bri\bit\bte\be() call to trans\u2010\r\n       fer the remaining bytes.  The subsequent call will either transfer fur\u2010\r\n       ther bytes or may result in an error (e.g., if the disk is now full).\r\n\r\n       If  _\bc_\bo_\bu_\bn_\bt is zero and _\bf_\bd refers to a regular file, then w\bwr\bri\bit\bte\be() may re\u2010\r\n       turn a failure status if one of the errors below is  detected.   If  no\r\n       errors are detected, or error detection is not performed, 0 will be re\u2010\r\n       turned without causing any other effect.   If  _\bc_\bo_\bu_\bn_\bt  is  zero  and  _\bf_\bd\r\n       refers  to a file other than a regular file, the results are not speci\u2010\r\n       fied.\r\n\r\nE\bER\bRR\bRO\bOR\bRS\bS\r\n       E\bEA\bAG\bGA\bAI\bIN\bN The file descriptor _\bf_\bd refers to a file other than a socket  and\r\n              has  been  marked  nonblocking (O\bO_\b_N\bNO\bON\bNB\bBL\bLO\bOC\bCK\bK), and the write would\r\n              block.  See o\bop\bpe\ben\bn(2) for further details on the O\bO_\b_N\bNO\bON\bNB\bBL\bLO\bOC\bCK\bK flag.\r\n\r\n       E\bEA\bAG\bGA\bAI\bIN\bN or E\bEW\bWO\bOU\bUL\bLD\bDB\bBL\bLO\bOC\bCK\bK\r\n              The file descriptor _\bf_\bd refers to a socket and  has  been  marked\r\n              nonblocking   (O\bO_\b_N\bNO\bON\bNB\bBL\bLO\bOC\bCK\bK),   and   the   write   would   block.\r\n              POSIX.1-2001 allows either error to be returned for  this  case,\r\n              and  does not require these constants to have the same value, so\r\n              a portable application should check for both possibilities.\r\n\r\n       E\bEB\bBA\bAD\bDF\bF  _\bf_\bd is not a valid file descriptor or is not open for writing.\r\n\r\n       E\bED\bDE\bES\bST\bTA\bAD\bDD\bDR\bRR\bRE\bEQ\bQ\r\n              _\bf_\bd refers to a datagram socket for which a peer address has  not\r\n              been set using c\bco\bon\bnn\bne\bec\bct\bt(2).\r\n\r\n       E\bED\bDQ\bQU\bUO\bOT\bT The user's quota of disk blocks on the filesystem containing the\r\n              file referred to by _\bf_\bd has been exhausted.\r\n\r\n       E\bEF\bFA\bAU\bUL\bLT\bT _\bb_\bu_\bf is outside your accessible address space.\r\n\r\n       E\bEF\bFB\bBI\bIG\bG  An attempt was made to write a file that exceeds the implementa\u2010\r\n              tion-defined maximum file size or the process's file size limit,\r\n              or to write at a position past the maximum allowed offset.\r\n\r\n       E\bEI\bIN\bNT\bTR\bR  The call was interrupted by a signal before any data  was  writ\u2010\r\n              ten; see s\bsi\big\bgn\bna\bal\bl(7).\r\n\r\n       E\bEI\bIN\bNV\bVA\bAL\bL _\bf_\bd  is attached to an object which is unsuitable for writing; or\r\n              the file was opened with the O\bO_\b_D\bDI\bIR\bRE\bEC\bCT\bT flag, and either  the  ad\u2010\r\n              dress  specified  in  _\bb_\bu_\bf,  the value specified in _\bc_\bo_\bu_\bn_\bt, or the\r\n              file offset is not suitably aligned.\r\n\r\n       E\bEI\bIO\bO    A low-level I/O error occurred while modifying the inode.   This\r\n              error may relate to the write-back of data written by an earlier\r\n              w\bwr\bri\bit\bte\be(), which may have been issued to a different file descrip\u2010\r\n              tor  on the same file.  Since Linux 4.13, errors from write-back\r\n              come with a promise that they _\bm_\ba_\by  be  reported  by  subsequent.\r\n              w\bwr\bri\bit\bte\be()  requests, and _\bw_\bi_\bl_\bl be reported by a subsequent f\bfs\bsy\byn\bnc\bc(2)\r\n              (whether or not they were also reported by w\bwr\bri\bit\bte\be()).  An  alter\u2010\r\n              nate  cause  of E\bEI\bIO\bO on networked filesystems is when an advisory\r\n              lock had been taken out on the file descriptor and this lock has\r\n              been  lost.   See the _\bL_\bo_\bs_\bt _\bl_\bo_\bc_\bk_\bs section of f\bfc\bcn\bnt\btl\bl(2) for further\r\n              details.\r\n\r\n       E\bEN\bNO\bOS\bSP\bPC\bC The device containing the file referred to by _\bf_\bd has no room for\r\n              the data.\r\n\r\n       E\bEP\bPE\bER\bRM\bM  The operation was prevented by a file seal; see f\bfc\bcn\bnt\btl\bl(2).\r\n\r\n       E\bEP\bPI\bIP\bPE\bE  _\bf_\bd is connected to a pipe or socket whose reading end is closed.\r\n              When this happens the writing process will also receive  a  S\bSI\bIG\bG\u2010\b\u2010\r\n              P\bPI\bIP\bPE\bE  signal.  (Thus, the write return value is seen only if the\r\n              program catches, blocks or ignores this signal.)\r\n\r\n       Other errors may occur, depending on the object connected to _\bf_\bd.\r\n\r\nC\bCO\bON\bNF\bFO\bOR\bRM\bMI\bIN\bNG\bG T\bTO\bO\r\n       SVr4, 4.3BSD, POSIX.1-2001.\r\n\r\n       Under SVr4 a write may be interrupted and return E\bEI\bIN\bNT\bTR\bR  at  any  point,\r\n       not just before any data is written.\r\n\r\nN\bNO\bOT\bTE\bES\bS\r\n       The types _\bs_\bi_\bz_\be_\b__\bt and _\bs_\bs_\bi_\bz_\be_\b__\bt are, respectively, unsigned and signed in\u2010\r\n       teger data types specified by POSIX.1.\r\n\r\n       A successful return from w\bwr\bri\bit\bte\be() does not make any guarantee that  data\r\n       has  been  committed  to  disk.  On some filesystems, including NFS, it\r\n       does not even guarantee that space has successfully been  reserved  for\r\n       the  data.   In  this case, some errors might be delayed until a future\r\n       w\bwr\bri\bit\bte\be(), f\bfs\bsy\byn\bnc\bc(2), or even c\bcl\blo\bos\bse\be(2).  The only way to  be  sure  is  to\r\n       call f\bfs\bsy\byn\bnc\bc(2) after you are done writing all your data.\r\n\r\n       If  a  w\bwr\bri\bit\bte\be()  is interrupted by a signal handler before any bytes are\r\n       written, then the call fails with the error E\bEI\bIN\bNT\bTR\bR; if it is interrupted\r\n       after  at  least  one byte has been written, the call succeeds, and re\u2010\r\n       turns the number of bytes written.\r\n\r\n       On Linux, w\bwr\bri\bit\bte\be() (and similar system  calls)  will  transfer  at  most\r\n       0x7ffff000  (2,147,479,552)  bytes, returning the number of bytes actu\u2010\r\n       ally transferred.  (This is true on both 32-bit and 64-bit systems.)\r\n\r\n       An error return value while performing w\bwr\bri\bit\bte\be() using  direct  I/O  does\r\n       not  mean  the entire write has failed. Partial data may be written and\r\n       the data at the file offset on which the w\bwr\bri\bit\bte\be() was  attempted  should\r\n       be considered inconsistent.\r\n\r\nB\bBU\bUG\bGS\bS\r\n       According to POSIX.1-2008/SUSv4 Section XSI 2.9.7 (\"Thread Interactions\r\n       with Regular File Operations\"):\r\n\r\n           All of the following functions shall be atomic with respect to each\r\n           other in the effects specified in POSIX.1-2008 when they operate on\r\n           regular files or symbolic links: ...\r\n\r\n       Among the APIs subsequently listed  are  w\bwr\bri\bit\bte\be()  and  w\bwr\bri\bit\bte\bev\bv(2).   And\r\n       among  the effects that should be atomic across threads (and processes)\r\n       are updates of the file offset.  However, on Linux before version 3.14,\r\n       this  was  not  the  case: if two processes that share an open file de\u2010\r\n       scription (see o\bop\bpe\ben\bn(2)) perform a w\bwr\bri\bit\bte\be() (or w\bwr\bri\bit\bte\bev\bv(2))  at  the  same\r\n       time, then the I/O operations were not atomic with respect updating the\r\n       file offset, with the result that the blocks of data output by the  two\r\n       processes might (incorrectly) overlap.  This problem was fixed in Linux\r\n       3.14.\r\n\r\nS\bSE\bEE\bE A\bAL\bLS\bSO\bO\r\n       c\bcl\blo\bos\bse\be(2), f\bfc\bcn\bnt\btl\bl(2), f\bfs\bsy\byn\bnc\bc(2), i\bio\boc\bct\btl\bl(2), l\bls\bse\bee\bek\bk(2),  o\bop\bpe\ben\bn(2),  p\bpw\bwr\bri\bit\bte\be(2),\r\n       r\bre\bea\bad\bd(2), s\bse\bel\ble\bec\bct\bt(2), w\bwr\bri\bit\bte\bev\bv(2), f\bfw\bwr\bri\bit\bte\be(3)\r\n\r\nC\bCO\bOL\bLO\bOP\bPH\bHO\bON\bN\r\n       This  page  is  part of release 5.05 of the Linux _\bm_\ba_\bn_\b-_\bp_\ba_\bg_\be_\bs project.  A\r\n       description of the project, information about reporting bugs,  and  the\r\n       latest     version     of     this    page,    can    be    found    at\r\n       https://www.kernel.org/doc/man-pages/.\r\n\r\nLinux                             2019-10-10                          WRITE(2)\r\n$ "}]}}, "a09ebcd4b51c450881beb6eb76046fb8": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "1in", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": "scroll", "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "b6ac91db5d9d49fa82797b55d38b9d22": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_15394aaa9a924567a84c621b198c5ef1", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ ls -l /proc/$$/fd/{0..2}\r\nlrwx------. 1 jovyan root 64 Jan 27 01:20 \u001b[0m\u001b[01;36m/proc/1185/fd/0\u001b[0m -> \u001b[40;33;01m/dev/pts/2\u001b[0m\r\nlrwx------. 1 jovyan root 64 Jan 27 01:20 \u001b[01;36m/proc/1185/fd/1\u001b[0m -> \u001b[40;33;01m/dev/pts/2\u001b[0m\r\nlrwx------. 1 jovyan root 64 Jan 27 01:20 \u001b[01;36m/proc/1185/fd/2\u001b[0m -> \u001b[40;33;01m/dev/pts/2\u001b[0m\r\n$ "}]}}, "b9a06a626dbb469eace0363193ca0300": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_fa047949fd4344058925d3eb58080ae6", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ file /dev/pts/2\r\n/dev/pts/2: character special (136/2)\r\n$ "}]}}, "c67d0bdcc56347ef909e6d516fb44d2e": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_1d5c16eee2ec428fae14d0380083bfc4", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ ls /usr/bin/ | grep perl | wc -l\r\n10\r\n$ "}]}}, "ddea041e7a264723a2156a3f7997d025": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_77907564518447ad88459cb148d5bb65", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ [[ -d mydir ]] && rm -rf mydir\r\n$     [[ -a myfile ]] && rm myfile\r\n$     [[ -a errors ]] && rm errors \r\n$     [[ -a mydate ]] && rm mydate\r\n$     [[ -a mynewdir ]] && rm -rf mynewdir\r\n$     [[ -a anotherfile ]] && rm anotherfile\r\n$     [[ -a mybin ]] && rm -rf  mybin\r\n$     [[ -a myinfo ]] && rm myinfo\r\n$ "}]}}, "fa047949fd4344058925d3eb58080ae6": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": "scroll", "padding": null, "right": null, "top": null, "visibility": null, "width": null}}}, "version_major": 2, "version_minor": 0}
</script>


    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./intro"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="structure.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title"><span class="section-number">3. </span>Operating System Structure &amp; Unix/Linux</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="tools.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">5. </span>Tools</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By (see contributing chapter book)<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>